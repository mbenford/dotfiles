#!/usr/bin/env bash

set -e

actions=(
	"suspend"
	"logout"
	"reboot"
	"shutdown"
)

selected=$(printf '%s\n' "${actions[@]}" | rofi -dmenu -p 'power menu' -no-custom)
confirmation=$(printf 'yes\nno' | rofi -dmenu -p "confirm $selected?" -theme-str 'entry { enabled: false; }')
[[ "$confirmation" != "yes" ]] && exit 0

case $selected in
	logout)
		qtile cmd-obj -o cmd -f shutdown
		;;
	suspend)
		systemctl suspend
		;;
	reboot)
		systemctl reboot
		;;
	shutdown)
		systemctl poweroff
		;;
	*)
		exit 1
		;;
esac

